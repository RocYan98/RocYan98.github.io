---
date: 2024-06-26
category: è®ºæ–‡
tag:
  - Paper
  - Avatar
  - Segmentation
  - LayGA
  - 3DGS
title: LayGA-è®ºæ–‡ç¬”è®°
order: 8
---

## LayGA: Layered Gaussian Avatars for Animatable Clothing Transfer

[é¡¹ç›®åœ°å€](https://jsnln.github.io/layga/)

SIGGRAPH 2024

![Fig. 1: Overview](https://rocyan.oss-cn-hangzhou.aliyuncs.com/blog/202406261135825.png)

## Abstract

å¯åŠ¨ç”»æœè£…è½¬ç§»ï¼Œæ—¨åœ¨ä¸è§’è‰²é—´è½¬ç§»æœè£…å¹¶å¯¹æœè£…è¿›è¡ŒåŠ¨ç”»ï¼Œæ˜¯ä¸€ä¸ªå…·æœ‰æŒ‘æˆ˜æ€§çš„é—®é¢˜ã€‚å¤§å¤šæ•°æ•°å­—äººå·¥ä½œå°†äººä½“å’Œæœè£…çš„è¡¨ç¤ºç»Ÿä¸€åœ¨ä¸€èµ·ï¼Œè¿™å¯¼è‡´åœ¨ä¸åŒèº«ä»½ä¹‹é—´çš„è™šæ‹Ÿè¯•è¡£å˜å¾—å›°éš¾ã€‚æ›´ç³Ÿçš„æ˜¯ï¼Œç»Ÿä¸€çš„è¡¨ç¤ºé€šå¸¸æ— æ³•å‡†ç¡®è·Ÿè¸ªæœè£…çš„æ»‘åŠ¨ã€‚ä¸ºäº†è§£å†³è¿™äº›é™åˆ¶ï¼Œæœ¬æ–‡æå‡ºäº†**åˆ†å±‚é«˜æ–¯æ•°å­—äºº (Layered Gaussian Avatars, LayGA)**ï¼Œè¿™æ˜¯ä¸€ç§æ–°çš„è¡¨ç¤ºæ–¹æ³•ï¼Œå°†èº«ä½“å’Œæœè£…åˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹çš„å±‚ï¼Œç”¨äºä»å¤šè§†è§’è§†é¢‘ä¸­å®ç°é€¼çœŸçš„å¯åŠ¨ç”»æœè£…è½¬ç§»ã€‚æœ¬æ–‡çš„è¡¨ç¤ºæ–¹æ³•åŸºäºé«˜æ–¯å›¾æ•°å­—äººï¼Œå› ä¸ºå®ƒåœ¨æœè£…ç»†èŠ‚çš„è¡¨ç¤ºèƒ½åŠ›ä¸Šéå¸¸å‡ºè‰²ã€‚ç„¶è€Œï¼Œé«˜æ–¯å›¾ä¼šåœ¨å®é™…è¡¨é¢å‘¨å›´äº§ç”Ÿéç»“æ„åŒ–çš„ 3D é«˜æ–¯åˆ†å¸ƒã€‚ç¼ºä¹å¹³æ»‘çš„æ˜¾å¼è¡¨é¢åœ¨å‡†ç¡®çš„æœè£…è·Ÿè¸ªå’Œå¤„ç†èº«ä½“ä¸æœè£…ä¹‹é—´çš„ç¢°æ’æ—¶å¸¦æ¥äº†æŒ‘æˆ˜ã€‚å› æ­¤ï¼Œæœ¬æ–‡æå‡ºäº†ä¸¤é˜¶æ®µè®­ç»ƒæ–¹æ³•ï¼ŒåŒ…æ‹¬å•å±‚é‡å»ºå’Œå¤šå±‚æ‹Ÿåˆã€‚åœ¨å•å±‚é‡å»ºé˜¶æ®µï¼Œæœ¬æ–‡æå‡ºäº†ä¸€ç³»åˆ—å‡ ä½•çº¦æŸæ¥é‡å»ºå¹³æ»‘è¡¨é¢ï¼ŒåŒæ—¶è·å¾—èº«ä½“å’Œæœè£…ä¹‹é—´çš„åˆ†å‰²ã€‚æ¥ä¸‹æ¥ï¼Œåœ¨å¤šå±‚æ‹Ÿåˆé˜¶æ®µï¼Œæœ¬æ–‡è®­ç»ƒä¸¤ä¸ªç‹¬ç«‹çš„æ¨¡å‹æ¥è¡¨ç¤ºèº«ä½“å’Œæœè£…ï¼Œå¹¶åˆ©ç”¨é‡å»ºçš„æœè£…å‡ ä½•å½¢çŠ¶ä½œä¸ºä¸‰ç»´ç›‘ç£ï¼Œä»¥å®ç°æ›´å‡†ç¡®çš„æœè£…è·Ÿè¸ªã€‚æ­¤å¤–ï¼Œæœ¬æ–‡æå‡ºäº†å‡ ä½•å’Œæ¸²æŸ“å±‚ï¼Œç”¨äºé«˜è´¨é‡çš„å‡ ä½•é‡å»ºå’Œé«˜ä¿çœŸæ¸²æŸ“ã€‚æ€»ä½“è€Œè¨€ï¼ŒLayGA å®ç°äº†é€¼çœŸçš„åŠ¨ç”»å’Œè™šæ‹Ÿè¯•ç©¿ï¼Œå¹¶ä¼˜äºå…¶ä»– baseline æ–¹æ³•ã€‚

## Introduction

æœ¬æ–‡å°†èº«ä½“å’Œæœè£…åˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹çš„å±‚ï¼Œä½†æ˜¯ç›´æ¥å­¦ä¹ ä¸¤ç»„é«˜æ–¯æ¥åˆ†åˆ«è¡¨ç¤ºèº«ä½“å’Œè¡£æœæ˜¯ä¸å¯è¡Œçš„ã€‚å› ä¸º 3DGS é€šå¸¸åœ¨è¡¨é¢ä¸Šåˆ†å¸ƒä¸å‡åŒ€ï¼Œæ— æ³•ä¸ºåŒºåˆ†å‡ºäººä½“å’Œè¡£æœï¼Œè€Œè¿™å¯¹äºæœè£…é€‚åº”ä¸åŒä½“å‹å’Œå¤„ç†è¡£æœå’Œäººä½“çš„ç¢°æ’æ˜¯å¾ˆé‡è¦çš„ã€‚å› æ­¤æœ¬æ–‡æå‡ºäº†ä¸¤é˜¶æ®µè®­ç»ƒæ–¹æ³•ï¼ŒåŒ…æ‹¬å•å±‚é‡å»ºå’Œå¤šå±‚æ‹Ÿåˆã€‚åœ¨å•å±‚é‡å»ºé˜¶æ®µï¼Œæå‡ºäº†ä¸€ç³»åˆ—çš„å‡ ä½•çº¦æŸæ¥å¼ºåˆ¶ 3D é«˜æ–¯ç”Ÿæˆåœ¨å¹³æ»‘çš„è¡¨é¢ä¸Šã€‚æœ€åè¿˜æå‡ºé¢å¤–çš„æ¸²æŸ“å±‚æ¥ä¿è¯å¹³æ»‘é‡å»ºçš„åŒæ—¶å®ç°é«˜ä¿çœŸçš„æ¸²æŸ“ï¼Œå› ä¸ºé€šè¿‡å‡ ä½•çº¦æŸè·å¾—çš„å¹³æ»‘è¡¨é¢å¯èƒ½ä¼šé™åˆ¶æ¸²æŸ“çš„è´¨é‡ã€‚

æœ¬æ–‡çš„åˆ›æ–°ç‚¹ï¼š

- æå‡ºäº†åˆ†å±‚é«˜æ–¯æ•°å­—äºº (LayGA)ï¼Œè¿™æ˜¯é¦–ä¸ªåŸºäº 3DGS çš„åˆ†å±‚æ•°å­—äººè¡¨ç¤ºæ³•ï¼Œç”¨äºå¯åŠ¨ç”»çš„æœè£…è½¬ç§»ã€‚
- åœ¨ 3D é«˜æ–¯ä¸Šå¼•å…¥äº†å‡ ä½•çº¦æŸï¼Œä»¥å®ç°å¹³æ»‘çš„è¡¨é¢é‡å»ºï¼Œå¹¶æ”¯æŒåœ¨åˆ†å±‚è¡¨ç¤ºä¸­å¤„ç†äººä½“ä¸æœè£…ä¹‹é—´çš„ç¢°æ’ã€‚
- åœ¨å¤šå±‚å­¦ä¹ ä¸­ï¼Œå¼•å…¥äº†å…ˆå‰çš„è¡£æœçš„åˆ†å‰²ä½œä¸ºç›‘ç£ï¼Œä»¥ä¾¿æ›´å‡†ç¡®åœ°è·Ÿè¸ªæœè£…è¾¹ç•Œã€‚æ­¤å¤–ï¼Œè¿˜å¼•å…¥äº†ä¸€ä¸ªæ¸²æŸ“å±‚ï¼Œä»¥ç¼“è§£å‡ ä½•é™åˆ¶å¸¦æ¥çš„æ¸²æŸ“è´¨é‡ä¸‹é™é—®é¢˜ã€‚

## Method

![Fig. 2: Pipeline](https://rocyan.oss-cn-hangzhou.aliyuncs.com/blog/202406271623207.png)

### Clothing-aware Avatar Representation

![Fig. 3: Illustration of the clothing-aware avatar representation](https://rocyan.oss-cn-hangzhou.aliyuncs.com/blog/202406271659738.png)

è¿™ç¯‡æ–‡ç« æ˜¯åŸºäº [Animatable Gaussians](Animatable-Gaussians.html) åšçš„ï¼Œé€šè¿‡é¢„æµ‹äºŒç»´çš„ pose ç›¸å…³é«˜æ–¯å›¾æ¥åˆ›å»ºé«˜ä¿çœŸçš„æ•°å­—äººã€‚æœ¬æ–‡çš„æœè£…æ„ŸçŸ¥æ•°å­—äººè¡¨ç¤º (å›¾ 3) å°±æ˜¯åœ¨å…¶ pose ç›¸å…³é«˜æ–¯å›¾ä¸Šå¯¹åšäº†é’ˆå¯¹æ€§ä¿®æ”¹ã€‚

å…ˆå­¦ä¹  position mapï¼Œç„¶åå†ç”¨ StyleUNet å­¦ä¹  Gaussian map çš„è¿‡ç¨‹å’Œ [Animatable Gaussians](Animatable-Gaussians.html) æ˜¯ä¸€æ ·çš„ï¼Œè¿™ç¯‡æ–‡ç« çš„åˆ›æ–°æ˜¯é™¤äº†é«˜æ–¯çš„åŸºæœ¬å‚æ•°å¤–ï¼Œé¢å¤–å¤šå­¦ä¹ ä¸€ä¸ª label ç”¨æ¥åŒºåˆ†è¿™ä¸ªé«˜æ–¯æ˜¯å±äºèº«ä½“è¿˜æ˜¯è¡£æœã€‚

æœ¬æ–‡çš„é«˜æ–¯å‚æ•°ä¸ºï¼š

- $c_i\in\R^3$ è¡¨ç¤ºé¢œè‰²
- $\Delta\bar{x}_i\in\R^3$ è¡¨ç¤ºå‚æ•°åŒ–æ¨¡æ¿ä¸Šçš„ç‚¹çš„ offset
- $o_i\in\R$ ä¸é€æ˜åº¦
- $\bar{s}_i\in\R^3$ è¡¨ç¤ºç¼©æ”¾å‘é‡
- $\bar{q}_i\in\R^4$ è¡¨ç¤ºé€‰æ‹©å››å…ƒæ•°
- $p_i^{cloth}$ å’Œ $p_i^{body}$ åˆ†åˆ«è¡¨ç¤ºé«˜æ–¯å±äºè¡£æœæˆ–è€…èº«ä½“çš„æ¦‚ç‡

æœ€ç»ˆ 3D é«˜æ–¯çš„å‡å€¼å’Œåæ–¹å·®ä¸ºï¼š
$$
\bar{x}_i=\bar{x}_i^{smpl}+\Delta\bar{x}_i
\tag{1}
$$

- $\bar{x}_i^{smpl}$ è¡¨ç¤ºåƒç´  $i$ æ‰€å¯¹åº”çš„å‚æ•°åŒ–æ¨¡æ¿ä¸Šçš„ç‚¹

$$
x_i=R_i(\theta)\bar{x}_i+t_i(\theta)
\tag{2}
$$

$$
\Sigma_i=R_i(\theta)\bar{\Sigma}_iR_i(\theta)^T
\tag{3}
$$

- $R(\theta)$ å’Œ $t(\theta)$ è¡¨ç¤ºé€šè¿‡ pose å‚æ•° $\theta$ æ±‚å‡ºæ¥çš„ LBS å˜æ¢çŸ©é˜µ
- $\bar{\Sigma}_i$ è¡¨ç¤ºé€šè¿‡ $\bar{s}_i$ å’Œ $\bar{q}_i$ ç®—å‡ºæ¥çš„æ ‡å‡†ç©ºé—´ä¸‹çš„åæ–¹å·®çŸ©é˜µ

### Single-Layer Modeling with Geometric Constraints

åœ¨å•å±‚é‡å»ºé˜¶æ®µï¼Œç›®æ ‡æ˜¯è®­ç»ƒä¸€ä¸ªæ¨¡å‹ï¼Œç”Ÿæˆå¹³æ»‘åˆ†å¸ƒåœ¨äººä½“å®é™…å‡ ä½•è¡¨é¢ä¸Šçš„ 3D é«˜æ–¯ï¼Œå¹¶åŒæ—¶è·å¾—äººä½“å’Œè¡£æœä¹‹é—´çš„åˆ†å‰²ã€‚

#### Geometric Constraints for Reconstruction

æœ¬æ–‡å¸Œæœ›é‡å»ºçš„ç©¿è¡£äººä½“è¡¨é¢æ˜¯è¿ç»­ã€å¹³æ»‘çš„ï¼Œå…·æœ‰æœè£…ç»†èŠ‚å’Œæ¸…æ™°çš„æœè£…è¾¹ç•Œã€‚é€šè¿‡ 2D é«˜æ–¯å›¾ä¸Šå‡åŒ€åˆ†å¸ƒçš„åƒç´ æ˜ å°„ä¸º 3D é«˜æ–¯ ï¼Œå› æ­¤å¯ä»¥æ–¹ä¾¿åœ°ä½¿ç”¨æ¯ä¸ªåƒç´ çš„é‚»åŸŸæ¥çº¦æŸåº•å±‚å‡ ä½•ã€‚å…·ä½“æ¥è¯´ï¼Œæœ¬æ–‡é€šè¿‡ä¸€äº›å‡ ä½•çº¦æŸæ¥æ­£åˆ™åŒ–å¹¶æé«˜ç»†èŠ‚ã€‚

**Image-based Normal Loss**. ä½¿ç”¨æ³•å‘é‡ä½œä¸ºé¢å¤–çš„ç›‘ç£ä¿¡å·ï¼Œä½¿ç”¨å›¾ç‰‡ä¸­çš„åƒç´ å’Œå…¶ç›¸é‚»åƒç´ æ¥è·å–æ³•å‘é‡ã€‚å¦‚å›¾ 4 æ‰€ç¤ºï¼Œå¯¹äºæ¯ä¸ªåƒç´  $i$ï¼Œå‡è®¾å…¶ç›¸é‚»åƒç´ åˆ†å¸ƒä¸º $j,k,l,m$ (é€†æ—¶é’ˆæ’åº)ï¼Œæ³•å‘é‡ $n_i$ ä¸ºï¼š
$$
n_i=  R_i(\theta) \bar{n}_i /\left\|R_i(\theta) \bar{n}_i\right\|_2, \quad \bar{n}_i=\hat{n}_i /\left\|\hat{n}_i\right\|_2 \\
\tag{4}
$$

$$
\hat{n}_i=\left(\bar{x}_j-\bar{x}_i\right) \times\left(\bar{x}_k-\bar{x}_i\right)+\left(\bar{x}_k-\bar{x}_i\right) \times\left(\bar{x}_l-\bar{x}_i\right)\\
+\left(\bar{x}_l-\bar{x}_i\right) \times\left(\bar{x}_m-\bar{x}_i\right)+\left(\bar{x}_m-\bar{x}_i\right) \times\left(\bar{x}_j-\bar{x}_i\right)
\tag{5}
$$

- $\bar{x}_i$ è¡¨ç¤ºåƒç´  $i$ çš„åæ ‡

> $\hat{n}_i$ å…¶å®å°±æ˜¯ç›¸é‚» 4 ä¸ªå¹³é¢æ³•å‘é‡çš„çŸ¢é‡å’Œï¼Œ$\bar{n}_i$ å°±æ˜¯è¿›è¡Œå•ä½åŒ–ï¼Œæœ€åçš„ $n_i$ æ˜¯å°†è¯¥æ³•å‘é‡ä»æ ‡å‡†ç©ºé—´å˜æ¢åˆ°è§‚æµ‹ç©ºé—´

å½“è®¡ç®—æ³•å‘é‡æ—¶ï¼Œåªè€ƒè™‘å‘é‡åƒç´ éƒ½åœ¨æ¨¡ç‰ˆå†…çš„åƒç´ ç‚¹ã€‚æœ€ç»ˆçš„ $\mathcal{L}_{norml}$ æ˜¯å¯¹æ¸²æŸ“å‡ºæ¥çš„æ³•å‘é‡å›¾å’Œé€šè¿‡ RGB å›¾é¢„æµ‹å‡ºæ¥çš„æ³•å‘é‡å›¾ä¹‹é—´æ±‚ $L_1$ lossã€‚

![Fig. 4: Illustration of normal computation on the Gaussian map](https://rocyan.oss-cn-hangzhou.aliyuncs.com/blog/202406301615659.png)

**Stitching Loss**. ç”±äºæœ¬æ–‡çš„ 3D é«˜æ–¯æ˜¯åœ¨ä¸¤ä¸ªç‹¬ç«‹çš„ map ä¸Šè¿›è¡Œå‚æ•°åŒ–çš„ï¼Œå› æ­¤å¼•å…¥äº†  $\mathcal{L}_{stitch}$ï¼Œå³ front map ä¸­è¾¹ç•Œåƒç´ ä¸ back map ä¸­å¯¹åº”åƒç´ ä¹‹é—´çš„ $L_2$ æŸå¤±ï¼Œä»¥é˜²æ­¢ä¸è¿ç»­æ€§ã€‚

**Regularization**. å’Œ [Animatable Gaussians](Animatable-Gaussians.thml) ä¸€æ ·åŠ äº†ä¸€ä¸ª offset æ­£åˆ™åŒ–æŸå¤± $\mathcal{L}_{off}=\frac{1}{N}\sum_i||\Delta\bar{x}||_2^2$ã€‚è¿˜åŠ äº†ä¸€ä¸ª**æ€»å˜åŒ– (total variational, TV)** æŸå¤± $\mathcal{L}_{TV}$ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯æ‰€æœ‰ç›¸é‚»åƒç´ ä¹‹é—´çš„ä½ç½® $L_2$ èŒƒæ•°çš„å‡å€¼ï¼Œç”¨äºçº¦æŸç›¸é‚»ä¸¤ä¸ªåƒç´ ä¹‹é—´çš„è·ç¦»ï¼Œé˜²æ­¢ 3D é«˜æ–¯è¿‡äºåˆ†æ•£ã€‚ä½¿ç”¨è¾¹ç¼˜æ­£åˆ™åŒ–æŸå¤± $L_{edge}$ æ¥æ­£åˆ™åŒ–åŸºæœ¬ SMPL-X æ¨¡å‹å’Œå˜å½¢æ¨¡å‹ä¹‹é—´çš„è¾¹é•¿åº¦ã€‚è¾¹æ˜¯æŒ‡ä¸¤ä¸ªç›¸é‚»æœ‰æ•ˆåƒç´ ä¹‹é—´çš„è¾¹ã€‚$L_{edge}$ æ˜¯æ·»åŠ  offset å‰åè¾¹é•¿åº¦çš„å¹³å‡ $ğ¿_2$ æŸå¤±ã€‚

æœ€ç»ˆå‡ ä½•æŸå¤±å‡½æ•°ä¸ºï¼š
$$
\mathcal{L}_{reg}=\lambda_{off}\mathcal{L}_{off}+\lambda_{TV}\mathcal{L}_{TV}+\lambda_{edge}\mathcal{L}_{edge}\\
\mathcal{L}_{geom}=\lambda_{normal} \mathcal{L}_{normal}+\lambda_{stitch} \mathcal{L}_{stitch}+\mathcal{L}_{reg}
\tag{6}
$$

#### Clothing Segmentation

ä¸Šæ–‡æåˆ°ä¼šå­¦ä¹ ä¸€ä¸ª label ç”¨æ¥åŒºåˆ†è¿™ä¸ªé«˜æ–¯æ˜¯å±äºèº«ä½“è¿˜æ˜¯è¡£æœï¼Œå³é¢„æµ‹æ¦‚ç‡ $p_i^{body}$ å’Œ $p_i^{cloth}$ æ¥åˆ¤æ–­è¿™ä¸ªé«˜æ–¯åŸºå…ƒæ˜¯å±äºèº«ä½“æˆ–è€…è¡£æœã€‚ä¼šç”¨ 3DGS çš„æ¸²æŸ“å™¨å°†è¿™ä¸¤ä¸ªå€¼æ¸²æŸ“ä¸ºåŒé€šé“çš„åˆ†å‰²å›¾åƒ $S$  (é€šé“ $S^{body}$ å’Œ $S^{cloth}$)ï¼Œlabel loss $\mathcal{L}_{label}$ æ˜¯æ¸²æŸ“åˆ†å‰²å›¾ $S$ å’Œ GT $S_{gt}$ ä¹‹é—´çš„äº¤å‰ç†µæŸå¤±ï¼š
$$
\begin{aligned}
\mathcal{L}_{ {label }}= & -\frac{1}{N_{ {body }}} \sum_i \log \left(S_i^{ {body }}\right)-\frac{1}{N_{ {cloth }}} \sum_{i^{\prime}} \log \left(S_{i^{\prime}}^{ {cloth }}\right) \\
& -\frac{1}{N_{ {bg }}} \sum_{i^{\prime \prime}} \log \left(1-S_{i^{\prime \prime}}^{ {body }}-S_{i^{\prime \prime}}^{ {cloth }}\right)
\end{aligned}
\tag{7}
$$

- $i,i',i''$ åˆ†åˆ«è¡¨ç¤º $S_{gt}$ ä¸­è¢«åˆ†å‰²ä¸ºèº«ä½“ã€è¡£æœå’ŒèƒŒæ™¯çš„åƒç´ 
- $N_{body},N_{cloth},N_{bg}$ åˆ†åˆ«è¡¨ç¤ºå¯¹åº”ç§ç±»çš„åƒç´ çš„æ•°é‡
- $S_{gt}$ æ˜¯ç»¼åˆè€ƒè™‘ SCHP çš„å’Œæ•°æ®é›†è‡ªå¸¦çš„äºŒè¿›åˆ¶ mask ä¹‹åçš„ç»“æœï¼Œå…·ä½“è§„åˆ™å¦‚ä¸‹
  - å¦‚æœåƒç´ çš„å€¼åœ¨æ•°æ®é›†è‡ªå¸¦çš„äºŒè¿›åˆ¶ mask ä¸­æ˜¯æ— æ•ˆçš„ï¼Œåˆ™å®ƒè¢«è§†ä¸ºèƒŒæ™¯ï¼›
  - å¦‚æœåƒç´ è¢« SCHP æ ‡è®°ä¸ºèƒŒæ™¯ï¼Œåˆ™è¢«è§†ä¸ºæœªç¡®å®šï¼›
  - å¦‚æœåƒç´ è¢« SCHP æ ‡è®°ä¸ºéä¸Šè¡£ï¼Œåˆ™è¢«è§†ä¸ºèº«ä½“ï¼›
  - å¦åˆ™ï¼Œè¯¥åƒç´ è¢«è§†ä¸ºæœè£…ï¼›

å’Œå‡ ä½•çº¦æŸä¸€æ ·ï¼Œä¹Ÿå¯¹ Gaussian label map åŠ äº†ä¸€ä¸ª $L_1$ TV loss $\mathcal{L}_{TV}^{label}$ï¼Œå¯¹è¾¹ç•Œåƒç´ åŠ äº†ä¸€ä¸ª $\mathcal{L}_{stitch}^{label}$ï¼Œæœ€ç»ˆåˆ†å‰²æŸå¤±å‡½æ•°ä¸ºï¼š
$$
\mathcal{L}_{ {seg }}=\lambda_{ {label }} \mathcal{L}_{ {label }}+\lambda_{\mathrm{TV}}^{ {label }} \mathcal{L}_{\mathrm{TV}}^{ {label }}+\lambda_{ {stitch }}^{ {label }} \mathcal{L}_{ {stitch }}^{ {label }}
\tag{8}
$$

æ¸²æŸ“æŸå¤±å‡½æ•°ä¸ºï¼š
$$
\mathcal{L}_{ {render }}=\lambda_{\mathrm{L} 1} \mathcal{L}_{\mathrm{L} 1}+\lambda_{ {ssim }} \mathcal{L}_{ {ssim }}+\lambda_{ {lpips }} \mathcal{L}_{ {lpips }}
\tag{9}
$$

æœ€åæ€»çš„æŸå¤±å‡½æ•°ä¸ºï¼š
$$
\mathcal{L}=\mathcal{L}_{render}+\mathcal{L}_{geom}+\mathcal{L}_{seg}
\tag{10}
$$

### Avatar Fitting with Multi-Layer Gaussian

å¤šå±‚å»ºæ¨¡é˜¶æ®µçš„ç›®æ ‡æ˜¯ä½¿ç”¨å•å±‚é˜¶æ®µåˆ†å‰²å‡ºæ¥çš„è¡£æœçš„å‡ ä½•æ¥æ„å»ºåŒå±‚çš„æ•°å­—äººã€‚åˆ†å‰²çš„æ ‡å‡†æ˜¯ $p^{cloth}>0.5$ åˆ™è¢«è®¤ä¸ºæ˜¯è¡£æœï¼Œå…¶ä»–çš„è®¤ä¸ºæ˜¯èº«ä½“ã€‚æœ¬èŠ‚çš„æ¨¡å‹æ¶æ„å’Œå•å±‚é˜¶æ®µç±»ä¼¼ï¼Œä½†åšäº†éƒ¨åˆ†çš„æ”¹å˜ã€‚

#### Separating Geometry and Rendering Layers

å‰æ–‡ä¸­åŠ äº†å‡ ä½•çº¦æŸæ¥ä½¿ 3D é«˜æ–¯æ±‡èšæˆä¸€ä¸ªå¹³æ»‘çš„è¡¨é¢ï¼Œä½†æ˜¯è¿™äº›å‡ ä½•é™åˆ¶å¯¹ 3DGS çš„æ¸²æŸ“è´¨é‡äº§ç”Ÿäº†è´Ÿé¢å½±å“ï¼Œå¯èƒ½æ˜¯å› ä¸ºè¿™äº›å‡ ä½•é™åˆ¶é™ä½äº†é«˜æ–¯åœ¨é«˜ä¿çœŸå¤–è§‚å»ºæ¨¡æ–¹é¢çš„çµæ´»æ€§ã€‚ä¸ºäº†é™ä½è¿™äº›è´Ÿé¢å½±å“å¹¶ä¿æŒå…‰æ»‘çš„å‡ ä½•è¡¨é¢ï¼Œæœ¬æ–‡æå‡ºå°†å‡ ä½•å±‚å’Œæ¸²æŸ“å±‚åˆ†å¼€ã€‚å¦‚å›¾ 5 æ‰€ç¤ºï¼Œé™¤äº†å‰é¢æåˆ°çš„ $\Delta\bar{x}_i$ï¼Œè¿˜é¢å¤–æ·»åŠ äº†ä¸€ä¸ª offset $\Delta\bar{y}_i$ã€‚é«˜æ–¯çš„ä½ç½®å±æ€§åªç”¨ç¬¬ä¸€ä¸ª offset è¿›è¡Œè®¡ç®— (å…¬å¼ 1 å’Œ 2)ï¼Œå³å‡ ä½•å±‚ã€‚é«˜æ–¯çš„ä½ç½®åŠ ä¸Šé¢å¤–çš„ offset ç”¨äºæœ¬é˜¶æ®µæœ€ç»ˆçš„æ¸²æŸ“ï¼Œå³æ¸²æŸ“å±‚ï¼š
$$
y_i=R_i(\theta)(\bar{x}_i^{smpl}+\Delta\bar{x}_i+\Delta\bar{y}_i)+t_i(\theta)
\tag{11}
$$
![Fig. 5: Illustration of geometric and rendering layers. ğœ– is the threshold for handling collisions.](https://rocyan.oss-cn-hangzhou.aliyuncs.com/blog/202407011516063.png)

ä¸ºäº†çº¦æŸèº«ä½“å±‚ä½¿å…¶ä½äºè¡£æœå±‚çš„é‡Œé¢ï¼Œåœ¨èº«ä½“å‡ ä½•å±‚å’Œè¡£æœå‡ ä½•å±‚ä¹‹é—´æ–½åŠ äº†ä¸€ä¸ªç¢°æ’æŸå¤±ï¼š
$$
\mathcal{L}_{coll}=\frac{1}{N_{cloth}}\sum_i\max(\epsilon-d_i,0)^2,\ \text{where} \ \ d_i=(\bar{x}_i^{cloth}-\bar{x}_i^{body})\cdot\bar{n}_i^{body}
\tag{12}
$$

- $\epsilon$ è¡¨ç¤ºè·ç¦»é˜ˆå€¼
- $i$ è¡¨ç¤º clothing Gaussian map ä¸­æ‰€æœ‰æœ‰æ•ˆçš„åƒç´ 

åªæ˜¯å¤„ç†èº«ä½“å‡ ä½•å±‚å’Œè¡£æœå‡ ä½•å±‚ä¹‹é—´çš„ç¢°æ’æ— æ³•ä¿è¯å¯¹åº”çš„æ¸²æŸ“å±‚ä¹‹é—´æ²¡æœ‰ç¢°æ’ï¼Œå› æ­¤å¯¹æ¸²æŸ“å±‚å¢åŠ ä¸€ä¸ªçº¦æŸï¼Œç¡®ä¿æ¸²æŸ“å±‚è´´è¿‘å‡ ä½•å±‚ï¼š
$$
\begin{aligned}
\mathcal{L}_{ {layer }}= & \frac{1}{N_{ {body }}} \sum_i \max \left(\left\|\Delta \bar{y}_i^{ {body }}\right\|_2-\epsilon / 2,0\right)^2 \\
& +\frac{1}{N_{ {cloth }}} \sum_{i^{\prime}} \max \left(\left\|\Delta \bar{y}_{i^{\prime}}^{ {cloth }}\right\|_2-\epsilon / 2,0\right)^2 .
\end{aligned}
\tag{13}
$$

$\mathcal{L}_{coll}$ å¯ä»¥ä½¿æœè£…å‡ ä½•å±‚å’Œäººä½“å‡ ä½•å±‚è‡³å°‘ç›¸è· $\epsilon$ï¼Œè€Œ $\mathcal{L}_{cloth}$ ä½¿å¯¹åº”çš„æ¸²æŸ“å±‚æœ€å¤šç›¸è· $\epsilon/2$ï¼Œå› æ­¤è¿™ä¸¤ç§æŸå¤±å‡½æ•°ä¼šå°†ä¸¤ä¸ªæ¸²æŸ“å±‚æ‹‰å¼€ï¼Œé¿å…ç¢°æ’ã€‚

#### Geometric Supervision from Reconstructions

ç”±äºä»…ä½¿ç”¨å›¾åƒç›‘ç£æ¥è·Ÿè¸ªæœè£…è¾¹ç•Œæ¯”è¾ƒå›°éš¾ï¼Œå› æ­¤æœ¬æ–‡åœ¨è¿™ä¸€é˜¶æ®µé€šè¿‡åœ¨æœè£…å‡ ä½•å±‚å’Œåˆ†å‰²åçš„æœè£…é‡å»ºä¹‹é—´ä½¿ç”¨**å€’è§’è·ç¦» (Chamfer distance, CD)** æŸå¤±æ¥ç›´æ¥ç›‘ç£æœè£…çš„è¿åŠ¨ï¼š
$$
\mathcal{cd}=\text{ChamferDist}(\{x_i^{cloth}\}_i,\{x_i^{recon}\}_i)
\tag{14}
$$

- $\{x_i^{cloth}\}_i,\{x_i^{recon}\}_i$ åˆ†åˆ«è¡¨ç¤ºè¡£æœå‡ ä½•å±‚çš„ç‚¹äº‘å’Œç¬¬ä¸€é˜¶æ®µé‡å»ºçš„ç‚¹äº‘

#### Segmentation Loss

åœ¨æœ¬é˜¶æ®µï¼Œåˆ†å‰²çš„æ¦‚ç‡ä¼šç›´æ¥è®¾ç½®ä¸º $1$ æˆ– $0$ï¼Œå¹¶ä¸”åªä¿ç•™ $\mathcal{L}_{reg}$ ä¸­çš„ $\mathcal{L}_{label}$ã€‚æœ€ç»ˆæœ¬é˜¶æ®µçš„æŸå¤±å‡½æ•°ä¸ºï¼š
$$
\mathcal{L}=\mathcal{L}_{ {render }}+\mathcal{L}_{ {geom }}+\lambda_{ {label }} \mathcal{L}_{ {label }}+\lambda_{ {coll }} \mathcal{L}_{ {coll }}+\lambda_{ {layer }} \mathcal{L}_{ {layer }}+\lambda_{ {cd }} \mathcal{L}_{\mathrm{cd}}
\tag{15}
$$

::: info Todo
 æœ¬æ–‡æœ€åè¿˜æœ‰ä¸€ä¸ª Animatable Clothing Transfer and Collision Handling ç« èŠ‚ï¼Œç”¨äºåœ¨ä¸åŒè§’è‰²ä¹‹é—´è½¬ç§»æœè£…å¹¶å¤„ç†ç¢°æ’ï¼Œæš‚æ—¶å…ˆè·³è¿‡ã€‚
:::

## Reference

[[1]LayGA: Layered Gaussian Avatars for Animatable Clothing Transfer](https://arxiv.org/pdf/2405.07319)